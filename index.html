<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Access Portal</title>
<link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="container">
    <h2>Welcome to the Boeing Hangar üîê</h2>
    <p>Enter the access password to enter the fleet zone.</p>
    <input type="password" id="password" placeholder="Enter Password" />
    <button id="submitBtn">Submit</button>
    <p id="message"></p>
  </div>

<script>
const input = document.getElementById('password');
const button = document.getElementById('submitBtn');
const message = document.getElementById('message');

button.addEventListener('click', checkPassword);
input.addEventListener('keydown', (e) => {
  if (e.key === 'Enter') checkPassword();
});

async function checkPassword() {
  const pwd = input.value.trim();
  if (!pwd) {
    message.textContent = 'Please enter the password!';
    return;
  }

  try {
    const res = await fetch(`/api/checkPassword?password=${encodeURIComponent(pwd)}`);
    const data = await res.json();

    if (data.success) {
      window.location.href = '/secret.html';
    } else {
      message.textContent = 'Access Denied ‚ùå';
    }
  } catch (err) {
    message.textContent = 'Server error. Please try again.';
  }
}
</script>
</body>
</html>

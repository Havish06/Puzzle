<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Boeing 777 Sliding Puzzle</title>
<style>
body{margin:0;background:#fffaf0;font-family:Arial, sans-serif;color:#2b2b2b;display:flex;flex-direction:column;align-items:center;padding:28px;}
h1{color:#d2691e;margin-bottom:6px;}
p{margin:0 0 14px;}
canvas{border:4px solid #d2691e;border-radius:8px;cursor:pointer;display:block;}
.center{display:flex;gap:10px;align-items:center;margin-top:12px;}
button{padding:8px 12px;border-radius:8px;border:none;background:#2ecc71;color:#06341a;font-weight:700;cursor:pointer;}
</style>
</head>
<body>
<h1>Boeing 777 Sliding Puzzle â€“ Rebuild the Fleet</h1>
<p>Click tiles adjacent to the empty space to slide them. Solve to reveal the secret code.</p>

<canvas id="puzzle" width="450" height="450"></canvas>
<div class="center">
  <button id="reshuffle">Reshuffle</button>
</div>

<script>
const SECRET = 'FLEET';
const img = new Image();
img.crossOrigin = 'anonymous';
img.src = "https://imgs.search.brave.com/PcJYWVSYGgp7RXz1ltj38HXmwaOyrjlZO-MUdY5FNRw/rs:fit:860:0:0:0/g:ce/aHR0cHM6Ly9tZWRpYS5pc3RvY2twaG90by5jb20vaWQvNTI4/MDcyODE0L3Bob3RvL2V0aWhhZC1ib2VpbmctNzg3LWRyZWFtbGluZXIuanBnP3M9NjEyeDYxMiZ3PTAmaz0yMCZjPXhiNE9x/ZVJLandTbFRiekQ5/MEFZZjV2cXJ3Z1RP/NHlYMHNjNVhsN3Zy/Z3c9";

const canvas = document.getElementById('puzzle');
const ctx = canvas.getContext('2d');
const rows = 3, cols = 3, size = 150;
const emptyIndex = 6;
let tiles = [];

img.onload = () => {
  init();
  draw();
};

function init() {
  tiles = [];
  for (let i = 0; i < rows * cols; i++) tiles.push(i === emptyIndex ? null : i);
  shuffle();
}

function shuffle() {
  let arr = tiles.filter((t, i) => t !== null);
  for (let i = arr.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [arr[i], arr[j]] = [arr[j], arr[i]];
  }
  let p = 0;
  for (let i = 0; i < tiles.length; i++) {
    if (i !== emptyIndex) tiles[i] = arr[p++];
    else tiles[i] = null;
  }
  draw();
}

function draw() {
  ctx.clearRect(0, 0, canvas.width, canvas.height);
  for (let i = 0; i < tiles.length; i++) {
    const dx = (i % cols) * size, dy = Math.floor(i / cols) * size;
    if (tiles[i] === null) {
      ctx.fillStyle = '#fffaf0';
      ctx.fillRect(dx, dy, size, size);
      continue;
    }
    const sx = (tiles[i] % cols) * size, sy = Math.floor(tiles[i] / cols) * size;
    ctx.drawImage(img, sx, sy, size, size, dx, dy, size, size);
  }
}

canvas.addEventListener('click', e => {
  const rect = canvas.getBoundingClientRect();
  const x = e.clientX - rect.left, y = e.clientY - rect.top;
  const clicked = Math.floor(y / size) * cols + Math.floor(x / size);
  const empty = tiles.indexOf(null);
  const valid = 
    (clicked === empty - 1 && clicked % cols !== cols - 1) ||
    (clicked === empty + 1 && clicked % cols !== 0) ||
    (clicked === empty - cols) ||
    (clicked === empty + cols);
  if (valid) {
    tiles[empty] = tiles[clicked];
    tiles[clicked] = null;
    draw();
    if (check()) alert(`SECRET MESSAGE IS "${SECRET}"`);
  }
});

function check() {
  for (let i = 0; i < tiles.length; i++) if (tiles[i] !== null && tiles[i] !== i) return false;
  return true;
}

document.getElementById('reshuffle').addEventListener('click', shuffle);
</script>
</body>
</html>
